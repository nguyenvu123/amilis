jQuery(function($){$(document).ready(function(){if($('#testGir').length>0){$('.etape-step-holder input[type="radio"]').on('change prev_question_loaded',function(e){$('.form-footer-nav .btn-nav.forward').removeClass('disabled').addClass('active');});$('.steps-container .step').click(function(e){e.preventDefault();var clickedStep=$(this).attr('data-question');var currentStep=$('.steps-container .step.step--active').attr('data-question');if(currentStep>1&&currentStep<17){if($(this).hasClass('step--completed')){if($('.etape-1.active').find('input').is(':checked')){$("a[data-question='"+currentStep+"']").removeClass('step--active').addClass('step--completed');}else{$("a[data-question='"+currentStep+"']").removeClass('step--active').removeClass('step--completed');}
$('#etape-1 .etape-1.active').hide().removeClass('active');$("a[data-question='"+clickedStep+"']").removeClass('step--completed').addClass('step--active');$("#etape-1 .etape-1").eq(clickedStep-1).fadeIn('fast').addClass('active');$('.test-gir').trigger('question_loaded');}}else if(currentStep==17){$("a[data-question='"+currentStep+"']").removeClass('step--active').removeClass('step--completed');$('#etape-3').hide();$('#etape-1').show();$("a[data-question='"+clickedStep+"']").removeClass('step--completed').addClass('step--active');$("#etape-1 .etape-1").eq(clickedStep-1).fadeIn('fast').addClass('active');$('.test-gir').trigger('prev_question_loaded');changeButtonToSuivant();$('#gdprContainer').hide();}});$('.form-footer-nav .btn-nav.forward').click(function(e){e.preventDefault();if($(this).hasClass('disabled'))
return false;if($('.etape-1.active').find('input').is(':checked')){$('#etape-1 .etape-1.active').hide().removeClass('active').next().fadeIn('fast').addClass('active');if(parseInt($('.step--active').attr('data-question'))<16){$('.test-gir').trigger('next_question_loaded');}else if(parseInt($('.step--active').attr('data-question'))==16){$('.test-gir').trigger('next_question_loaded');$('#etape-1').hide();$('#etape-3').fadeIn('fast');$(this).removeClass('active').addClass('disabled');$('.form-footer.fixed').removeClass('fixed');$('#gdprContainer').show();changeButtonToEnvoyer();}}else{if($(this).hasClass('form-submit')){girSubmitData();}}});$('.form-footer-nav .btn-nav.back').click(function(e){e.preventDefault();var step=parseInt($('.step--active').attr('data-question'));if(step>1&&step<17){$('#etape-1 .etape-1.active').hide().removeClass('active').prev().fadeIn('fast').addClass('active');$('.test-gir').trigger('prev_question_loaded');$('#gdprContainer').hide();$('.form-footer-nav .btn-nav.forward').removeClass('form-submit');}else if(step==17){$('#etape-3').hide();$('#etape-1').show();$('#etape-1 .etape-1').last().fadeIn('fast').addClass('active');$('.test-gir').trigger('prev_question_loaded');changeButtonToSuivant();$('#gdprContainer').hide();}});$('.test-gir').on('question_loaded',function(){var step=parseInt($('.step--active').attr('data-question'));if(step==1){$('.form-footer-nav .btn-nav.forward').removeClass('disabled').addClass('active');$('.form-footer-nav .btn-nav.back').removeClass('active').addClass('disabled');}
if(step>1)
$('.form-footer-nav .btn-nav.back').removeClass('disabled').addClass('active');if($('.etape-1.active').find('input').is(':checked'))
$('.form-footer-nav .btn-nav.forward').removeClass('disabled').addClass('active');else
$('.form-footer-nav .btn-nav.forward').removeClass('active').addClass('disabled');});$('.test-gir').on('next_question_loaded',function(){$('.step--active').removeClass('step--active').addClass('step--completed').next().addClass('step--active');var step=parseInt($('.step--active').attr('data-question'));if(step>1)
$('.form-footer-nav .btn-nav.back').removeClass('disabled').addClass('active');if($('.etape-1.active').find('input').is(':checked'))
$('.form-footer-nav .btn-nav.forward').removeClass('disabled').addClass('active');else
$('.form-footer-nav .btn-nav.forward').removeClass('active').addClass('disabled');});$('.test-gir').on('prev_question_loaded',function(){var currentStep=$('.step--active').attr('data-question');if($('.etape-1').eq(currentStep-1).find('input').is(':checked'))
$('.step--active').removeClass('step--active').addClass('step--completed').prev().addClass('step--active');else
$('.step--active').removeClass('step--active').prev().addClass('step--active');if(parseInt($('.step--active').attr('data-question'))>1){$('.form-footer-nav .btn-nav.back').removeClass('disabled').addClass('active');$('.form-footer-nav .btn-nav.forward').removeClass('disabled').addClass('active');}
else{$('.form-footer-nav .btn-nav.back').removeClass('active').addClass('disabled');$('.form-footer-nav .btn-nav.forward').removeClass('disabled').addClass('active');}});function girSubmitData(){var input={'name':$('#amelis_nom_field').val(),'phone':$('#amelis_tph_field').val(),'email':$('#amelis_em_field').val(),'code_postal':$('#randomcp_field_name').val(),'newsletter':'','contactesign':'',};if($("#newsletter-sign").is(':checked'))
input.newsletter=$("#newsletter-sign").val();if($("#contacte-sign").is(':checked'))
input.contactesign=$("#contacte-sign").val();var data={action:'girSubmit',nonce:ajax_object.nonce,name:input.name,email:input.email,phone:input.phone,code_postal:input.code_postal,newsletter:input.newsletter,contactesign:input.contactesign,data:$('#testGir input').serialize()};$.post(ajax_object.url,data,function(response_data){var response=jQuery.parseJSON(response_data);window.location.href=response.thank_you_url;}).fail(function(xhr,textStatus,e){});}
function changeButtonToEnvoyer(){$('.form-footer-nav .btn-nav.forward').addClass('form-submit btn-etape-3').removeClass('btn-etape-1');$('.form-footer-nav .btn-nav.forward span').text('Envoyer');$('.form-footer-nav .btn-nav.forward svg').hide();}
function changeButtonToSuivant(){if($('.form-footer-nav .btn-nav.forward').hasClass('btn-etape-3')){$('.form-footer-nav .btn-nav.forward').removeClass('form-submit btn-etape-3').addClass('btn-etape-1');$('.form-footer-nav .btn-nav.forward span').text('Suivant');$('.form-footer-nav .btn-nav.forward svg').show();}}}});});